---
title: "Puzzle: 掷骰子最大化期望收益"
description: "这是一道关于掷骰子的数学期望问题。"
date: 2025-04-20T23:24:00+10:00
lastmod: 2025-04-20T23:31:00+10:00
categories:
  - 学习
tags:
  - Puzzle
math: mathjax
---

## 题目

你可以多次掷一个六面骰子，每次得分为点数，累计为总收益；若掷出与之前相同的点数则收益归零，游戏立即结束。你可以随时停止，问最优停止时机是多少次，才能使期望收益最大？

## 解题思路

很明显，只能掷1~6次。

先来算出现相同点数的概率，这个比较简单：

| 次数 $n$ | 无重复点数的概率 $P(n)$                                                                                         |
|--------|---------------------------------------------------------------------------------------------------------|
| 1      | 1                                                                                                       |
| 2      | $\frac{5}{6}$                                                                                           |
| 3      | $\frac{5}{6} \cdot \frac{4}{6} = \frac{20}{36} $                                                        |
| 4      | $\frac{5}{6} \cdot \frac{4}{6} \cdot \frac{3}{6} = \frac{60}{216}$                                      |
| 5      | $\frac{5}{6} \cdot \frac{4}{6} \cdot \frac{3}{6} \cdot \frac{2}{6} = \frac{120}{1296}$                  |
| 6      | $\frac{5}{6} \cdot \frac{4}{6} \cdot \frac{3}{6} \cdot \frac{2}{6} \cdot \frac{1}{6}= \frac{120}{7776}$ |
| 7      | 0                                                                                                       |

然后开始计算期望收益。

$n = 1$ 时，期望收益为 3.5。

$n = 2$ 时，期望收益需要一点计算。来看看两个骰子的点数和的分布：

| 🎲\🎲 | 1 | 2 | 3 | 4 | 5 | 6 |
|:----:|--:|--:|--:|--:|--:|--:|
| **1** | 2 | 3 | 4 | 5 | 6 | 7 |
| **2** | 3 | 4 | 5 | 6 | 7 | 8 |
| **3** | 4 | 5 | 6 | 7 | 8 | 9 |
| **4** | 5 | 6 | 7 | 8 | 9 |10 |
| **5** | 6 | 7 | 8 | 9 |10 |11 |
| **6** | 7 | 8 | 9 |10 |11 |12 |

因为投到相等的点数时收益归零，所以要忽略掉主对角线的数值。也就是说总共只有 $6 \times 6 - 6 = 30$ 种情况。观察一下这个表格，是对称的。关于副对角线对称的两个元素的平均值都是7（例如6和8，5和9等等）。所以数学期望都是7。这个时候收益的数学期望为：

$$
P(2) \times 7 = \frac{5}{6} \times 7 = \frac{35}{6} \approx 5.83
$$

发现了一个关键点，就是不管是否忽略相同点数，数学期望都没变，都是单次投掷乘以次数。其实不管投多少次，即使有禁止重复的限制，数学期望都是一样的算法。可以用 $n=6$ 来验证一下，此时只有一个结果，就是 $1+2+3+4+5+6=21=3.5 \times 6$，证实了猜测。

因此后面的收益也可以直接用这个公式计算：
$$
E(n) = P(n) \times 3.5 \times n + (1 - P(n)) \times 0 = P(n) \times 3.5 \times n
$$

算出来结果如下：

| 次数 $n$ | 期望收益 $E(n)$                                                                                                                                   |
|--------|-----------------------------------------------------------------------------------------------------------------------------------------------|
| 1      | 3.5                                                                                                                                           |
| 2      | $\frac{5}{6} \times 3.5 \times 2 = \frac{5}{6} \times 7 \approx 5.83$                                                                         |
| 3      | $\frac{5}{6} \cdot \frac{4}{6} \times 3.5 \times 3 = \frac{20}{36} \times 10.5 \approx 5.83$                                                  |
| 4      | $\frac{5}{6} \cdot \frac{4}{6} \cdot \frac{3}{6} \times 3.5 \times 4 = \frac{60}{216} \times 14 \approx 3.88$                                 |
| 5      | $\frac{5}{6} \cdot \frac{4}{6} \cdot \frac{3}{6} \cdot \frac{2}{6} \times 3.5 \times 5 = \frac{120}{1296} \times 17.5 \approx 1.62$           |
| 6      | $\frac{5}{6} \cdot \frac{4}{6} \cdot \frac{3}{6} \cdot \frac{2}{6} \cdot \frac{1}{6} \times 3.5 \times 6 = \frac{120}{7776} \times 21 = 0.32$ |

因此当 $n=2$ 或 $n=3$ 时期望收益最大，为5.83。
